{"ast":null,"code":"import _slicedToArray from\"/Users/morteanualexandru/Desktop/rodio/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import\"./Homepage.css\";import{Link,useLocation}from\"react-router-dom\";import{peer,socket}from'../App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var localPeerId;function Homepage(){var location=useLocation();var path=location.pathname.split('/');var _useState=useState(new Audio()),_useState2=_slicedToArray(_useState,2),audioElement=_useState2[0],setAudioElement=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),localStream=_useState4[0],setLocalStream=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),k=_useState6[0],setK=_useState6[1];peer.on('open',function(id){localPeerId=id;console.log(localPeerId);});peer.on('call',function(call){call.answer(localStream);call.on('stream',function(stream){//console.log(stream);\naudioElement.srcObject=stream;});});var handleOn=function handleOn(){if(k==1){socket.send(JSON.stringify({id:localPeerId,chanel:path}));setK(0);}else{audioElement.play();setK(1);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"containerHome\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"RODIO\"}),/*#__PURE__*/_jsx(Link,{to:\"/control\",children:\" CONTROL STATION \"}),/*#__PURE__*/_jsx(\"div\",{className:\"vizualizer\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleOn,children:\"ON/OFF\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Volume\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Next\"}),/*#__PURE__*/_jsx(\"div\",{children:path})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"adds\"}),/*#__PURE__*/_jsx(\"div\",{className:\"currentStation\"})]})]});}export default Homepage;","map":{"version":3,"names":["React","useState","Link","useLocation","peer","socket","localPeerId","Homepage","location","path","pathname","split","Audio","audioElement","setAudioElement","localStream","setLocalStream","k","setK","on","id","console","log","call","answer","stream","srcObject","handleOn","send","JSON","stringify","chanel","play"],"sources":["/Users/morteanualexandru/Desktop/rodio/src/pages/Homepage.js"],"sourcesContent":["import React, { useState } from 'react'\nimport \"./Homepage.css\"\nimport { Link, useLocation } from \"react-router-dom\";\nimport { peer, socket } from '../App';\nexport let localPeerId;\nfunction Homepage() {\n  const location = useLocation()\n  const path = location.pathname.split('/');\n  let [audioElement, setAudioElement] = useState(new Audio());\n  let [localStream, setLocalStream] = useState();\n  let [k, setK] = useState(1);\n  peer.on('open', id => {\n    localPeerId = id;\n    console.log(localPeerId);\n  });\n  peer.on('call', call => {\n    call.answer(localStream);\n    call.on('stream', stream => {\n      //console.log(stream);\n      audioElement.srcObject = stream;\n    });\n  });\n  const handleOn = () => {\n    if (k == 1) {\n      socket.send(JSON.stringify({ id: localPeerId, chanel: path }));\n      setK(0);\n    } else {\n      audioElement.play()\n      setK(1);\n    }\n  };\n  return (\n    <div className='containerHome'>\n        <div>\n            <b>RODIO</b>\n            <Link to=\"/control\"> CONTROL STATION </Link>\n            <div className='vizualizer'></div>\n            <button onClick={ handleOn }>ON/OFF</button>\n            <button>Volume</button>\n            <button>Next</button>\n            <div>{path}</div>\n        </div>\n        <div>\n            <div className='adds'></div>\n            <div className='currentStation'></div>\n        </div>\n    </div>\n  )\n}\n\nexport default Homepage"],"mappings":"4HAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,gBAAgB,CACvB,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,IAAI,CAAEC,MAAM,KAAQ,QAAQ,CAAC,wFACtC,MAAO,IAAIC,YAAW,CACtB,QAASC,SAAQ,EAAG,CAClB,GAAMC,SAAQ,CAAGL,WAAW,EAAE,CAC9B,GAAMM,KAAI,CAAGD,QAAQ,CAACE,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CACzC,cAAsCV,QAAQ,CAAC,GAAIW,MAAK,EAAE,CAAC,wCAAtDC,YAAY,eAAEC,eAAe,eAClC,eAAoCb,QAAQ,EAAE,yCAAzCc,WAAW,eAAEC,cAAc,eAChC,eAAgBf,QAAQ,CAAC,CAAC,CAAC,yCAAtBgB,CAAC,eAAEC,IAAI,eACZd,IAAI,CAACe,EAAE,CAAC,MAAM,CAAE,SAAAC,EAAE,CAAI,CACpBd,WAAW,CAAGc,EAAE,CAChBC,OAAO,CAACC,GAAG,CAAChB,WAAW,CAAC,CAC1B,CAAC,CAAC,CACFF,IAAI,CAACe,EAAE,CAAC,MAAM,CAAE,SAAAI,IAAI,CAAI,CACtBA,IAAI,CAACC,MAAM,CAACT,WAAW,CAAC,CACxBQ,IAAI,CAACJ,EAAE,CAAC,QAAQ,CAAE,SAAAM,MAAM,CAAI,CAC1B;AACAZ,YAAY,CAACa,SAAS,CAAGD,MAAM,CACjC,CAAC,CAAC,CACJ,CAAC,CAAC,CACF,GAAME,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrB,GAAIV,CAAC,EAAI,CAAC,CAAE,CACVZ,MAAM,CAACuB,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC,CAAEV,EAAE,CAAEd,WAAW,CAAEyB,MAAM,CAAEtB,IAAK,CAAC,CAAC,CAAC,CAC9DS,IAAI,CAAC,CAAC,CAAC,CACT,CAAC,IAAM,CACLL,YAAY,CAACmB,IAAI,EAAE,CACnBd,IAAI,CAAC,CAAC,CAAC,CACT,CACF,CAAC,CACD,mBACE,aAAK,SAAS,CAAC,eAAe,wBAC1B,oCACI,mBAAG,OAAK,EAAI,cACZ,KAAC,IAAI,EAAC,EAAE,CAAC,UAAU,UAAC,mBAAiB,EAAO,cAC5C,YAAK,SAAS,CAAC,YAAY,EAAO,cAClC,eAAQ,OAAO,CAAGS,QAAU,UAAC,QAAM,EAAS,cAC5C,wBAAQ,QAAM,EAAS,cACvB,wBAAQ,MAAI,EAAS,cACrB,qBAAMlB,IAAI,EAAO,GACf,cACN,oCACI,YAAK,SAAS,CAAC,MAAM,EAAO,cAC5B,YAAK,SAAS,CAAC,gBAAgB,EAAO,GACpC,GACJ,CAEV,CAEA,cAAeF,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}